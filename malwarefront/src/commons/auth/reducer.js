import authActionTypes from "./types"
import authService from "./service";

export default function(state, action) {
    if(state === undefined)
        return { loggedUser: authService.getAuthenticatedUser() }
    switch(action.type) {
        case authActionTypes.LOGIN_SUCCESS:
            return { ...state, loggedUser: action.user, navPath: action.navPath }
        case authActionTypes.LOGIN_FAILURE:
        case authActionTypes.LOGOUT:
            return { ...state, loggedUser: undefined, error: action.error, navPath: action.navPath && (action.navPath.startsWith("/login") ? "/" : action.navPath)}
        default:
            return state;
    }
}